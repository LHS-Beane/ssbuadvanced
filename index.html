<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>SSBU Crew Battle Manager</title>

    <link rel="stylesheet" href="style.css">

    <!-- No PeerJS, no eval, all CSP-safe -->
</head>

<body>

<div class="app-container">

    <!-- GLOBAL STATUS BAR -->
    <div id="global-status" class="status-bar" aria-live="polite">
        Ready to connect.
    </div>

    <!-- ============================================================
         SCREEN 1 — CONNECTION
    ============================================================ -->
    <section class="screen active" data-screen="connection">

        <h1 class="app-title">SSBU Crew Battle</h1>
        <h2 class="screen-subtitle">1. Connect Teams</h2>

        <!-- HOST BLOCK -->
        <div class="module">
            <button id="host-btn" class="btn-full" type="button">
                Create Room (Home)
            </button>

            <div id="host-info" class="hide">
                <p class="label">Room ID:</p>

                <div class="room-display">
                    <strong id="room-id">Generating…</strong>
                </div>

                <p class="info-text">Share this code with the Away Team</p>
            </div>
        </div>

        <!-- JOIN BLOCK -->
        <div class="module">

            <hr class="divider">
            <p class="center">OR</p>

            <input id="join-id-input"
                   type="text"
                   placeholder="Enter Room ID"
                   autocomplete="off">

            <button id="join-btn" class="btn-full" type="button">
                Join Room (Away)
            </button>

        </div>

    </section>

    <!-- ============================================================
         SCREEN 2 — TEAM SETUP
    ============================================================ -->
    <section class="screen hide" data-screen="roster">

        <h2 class="screen-subtitle">2. Team Setup</h2>

        <p>Enter your Team Name:</p>

        <div class="input-group">
            <input id="my-team-name"
                   type="text"
                   placeholder="e.g. Tigers Esports">
        </div>

        <p class="info-text">
            Players P1–P4 are generated automatically.
        </p>

        <button id="submit-roster-btn" class="btn-full" type="button">
            Ready Up
        </button>

        <p id="roster-status" class="status-bar">
            Waiting for opponent…
        </p>

    </section>

    <!-- ============================================================
         SCREEN 3 — SCOREBOARD
    ============================================================ -->
    <section class="screen hide" data-screen="scoreboard">

        <div class="scoreboard-header">

            <div class="team-box" data-team="home">
                <h3 id="disp-home-name">Home</h3>
                <div class="big-score" id="score-home">12</div>
                <small>Stocks Left</small>
            </div>

            <div class="vs-badge">VS</div>

            <div class="team-box" data-team="away">
                <h3 id="disp-away-name">Away</h3>
                <div class="big-score" id="score-away">12</div>
                <small>Stocks Left</small>
            </div>

        </div>

        <div class="matchup-panel">
            <div class="active-player" data-team="home">
                <span id="current-home-player" class="player-name">P1</span>
                <div id="stocks-home" class="stock-dots"></div>
            </div>

            <div class="active-player" data-team="away">
                <span id="current-away-player" class="player-name">P1</span>
                <div id="stocks-away" class="stock-dots"></div>
            </div>
        </div>

        <div class="action-panel">
            <p id="action-text" class="center">
                Ready for Stage Selection?
            </p>

            <button id="start-stage-select-btn" class="btn-full" type="button">
                Select Stage
            </button>
        </div>

    </section>

    <!-- ============================================================
         SCREEN 4 — STAGE SELECT
    ============================================================ -->
    <section class="screen hide" data-screen="stage-select">

        <h2 id="stage-phase-title" class="screen-subtitle">
            Stage Selection
        </h2>

        <p id="instructions" class="highlight-text"></p>

        <div class="stage-section">
            <h3>Starters</h3>
            <div id="starter-list" class="stage-list"></div>
        </div>

        <div class="stage-section">
            <h3>Counterpicks</h3>
            <div id="counterpick-list" class="stage-list"></div>
        </div>

    </section>

    <!-- ============================================================
         SCREEN 5 — REPORT MATCH RESULT
    ============================================================ -->
    <section class="screen hide" data-screen="report">

        <h2 class="screen-subtitle">Report Match Result</h2>

        <p>
            Playing on:
            <strong id="report-stage-name">...</strong>
        </p>

        <hr>

        <p>Who won this game?</p>

        <div class="report-buttons">
            <button id="btn-home-won" class="btn-full" type="button">
                Home Team Won
            </button>

            <button id="btn-away-won" class="btn-full" type="button">
                Away Team Won
            </button>
        </div>

        <div id="stock-count-selector" class="hide">
            <p>How many stocks did the winner have left?</p>

            <div class="stock-number-buttons">
                <button data-stocks="1" type="button">1</button>
                <button data-stocks="2" type="button">2</button>
                <button data-stocks="3" type="button">3</button>
            </div>
        </div>

    </section>

    <!-- ============================================================
         SCREEN 6 — GAME OVER
    ============================================================ -->
    <section class="screen hide" data-screen="gameover">

        <h1 class="center">MATCH COMPLETE</h1>

        <h2 id="winner-banner" class="center">TEAM WINS!</h2>

        <div class="final-score-box center">
            <p>Final Score (Stocks Taken)</p>
            <div id="final-score-display" class="big-score">
                12 – 11
            </div>
        </div>

        <button id="new-match-btn" class="btn-full" type="button">
            New Match
        </button>

    </section>

</div>

<!-- ============================================================
     JAVASCRIPT MODULES
============================================================ -->
<script type="module" src="app.js"></script>

</body>
</html>
