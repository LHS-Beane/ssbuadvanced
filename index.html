<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SSBU Crew Battle Manager</title>

    <link rel="stylesheet" href="style.css" />
    <script src="peerjs.min.js"></script>
</head>

<body>

<div class="app-container">

    <!-- ====================== GLOBAL STATUS BAR ====================== -->
    <div id="global-status" class="status-bar" aria-live="polite">
        Ready to connect.
    </div>


    <!-- ====================== SCREEN: CONNECTION ====================== -->
    <section class="screen active" data-screen="connection">

        <h1 class="app-title">SSBU Crew Battle</h1>
        <h2 class="screen-subtitle">1. Connect Teams</h2>

        <!-- Host Create -->
        <div class="module">
            <button id="host-btn" class="btn-full">Create Room (Home)</button>

            <div id="host-info" class="hide">
                <p class="label">Room ID:</p>
                <div class="room-display">
                    <strong id="room-id">Generating…</strong>
                </div>
                <p class="info-text">Share this code with the Away Team</p>
            </div>
        </div>

        <!-- Join -->
        <div class="module">
            <hr class="divider">
            <p class="center">OR</p>

            <input id="join-id-input" type="text" placeholder="Enter Room ID" autocomplete="off">

            <button id="join-btn" class="btn-full">Join Room (Away)</button>
        </div>
    </section>



    <!-- ====================== SCREEN: ROSTER ====================== -->
    <section class="screen hide" data-screen="roster">

        <h2 class="screen-subtitle">2. Team Setup</h2>

        <p>Enter your Team Name:</p>

        <div class="input-group">
            <input id="my-team-name" type="text" placeholder="e.g. Tigers Esports">
        </div>

        <p class="info-text">Players will be auto-generated as: Home P1, Home P2, etc.</p>

        <button id="submit-roster-btn" class="btn-full">Ready Up</button>

        <p id="roster-status" class="status-bar">Waiting for opponent…</p>
    </section>



    <!-- ====================== SCREEN: FIRST UP ====================== -->
    <section class="screen hide" data-screen="first-up">

        <h2 class="screen-subtitle">3. Select First-Up Player</h2>

        <p id="firstup-instructions" class="info-text"></p>

        <div class="firstup-list">
            <!-- Buttons inserted dynamically -->
        </div>

    </section>



    <!-- ====================== SCREEN: SCOREBOARD ====================== -->
    <section class="screen hide" data-screen="scoreboard">

        <div class="scoreboard-header">

            <div class="team-box" data-team="home">
                <h3 id="disp-home-name">Home</h3>
                <div class="big-score" id="score-home">12</div>
                <small>Stocks Left</small>
            </div>

            <div class="vs-badge">VS</div>

            <div class="team-box" data-team="away">
                <h3 id="disp-away-name">Away</h3>
                <div class="big-score" id="score-away">12</div>
                <small>Stocks Left</small>
            </div>

        </div>

        <div class="matchup-panel">
            <div class="active-player" data-team="home">
                <span id="current-home-player" class="player-name"></span>
                <div id="stocks-home" class="stock-dots"></div>
            </div>

            <div class="active-player" data-team="away">
                <span id="current-away-player" class="player-name"></span>
                <div id="stocks-away" class="stock-dots"></div>
            </div>
        </div>

        <div class="action-panel">
            <p id="action-text" class="center">Ready for Stage Selection?</p>
            <button id="start-stage-select-btn" class="btn-full">Stage Select</button>
        </div>

    </section>



    <!-- ====================== SCREEN: STAGE SELECT ====================== -->
    <section class="screen hide" data-screen="stage-select">

        <h2 id="stage-phase-title" class="screen-subtitle">Stage Selection</h2>
        <p id="instructions" class="highlight-text"></p>

        <div class="stage-section">
            <h3>Starters</h3>
            <div id="starter-list" class="stage-list"></div>
        </div>

        <div class="stage-section">
            <h3>Counterpicks</hh3>
            <div id="counterpick-list" class="stage-list"></div>
        </div>

    </section>



    <!-- ====================== SCREEN: REPORT RESULT ====================== -->
    <section class="screen hide" data-screen="report">

        <h2 class="screen-subtitle">Report Game Result</h2>

        <p>Stage Played: <strong id="report-stage-name">...</strong></p>
        <hr>

        <p class="center">Who won this game?</p>

        <div class="report-buttons">
            <button id="btn-home-won" class="btn-full">Home Won</button>
            <button id="btn-away-won" class="btn-full">Away Won</button>
        </div>

        <div id="stock-count-selector" class="hide">
            <p class="center">Winner Stock Count:</p>

            <div class="stock-number-buttons">
                <button data-stocks="1">1</button>
                <button data-stocks="2">2</button>
                <button data-stocks="3">3</button>
            </div>
        </div>

    </section>



    <!-- ====================== SCREEN: ROUND WIN ====================== -->
    <section class="screen hide" data-screen="round-win">

        <h1 id="round-winner-banner" class="center"></h1>
        <p class="center">Prepare for next round…</p>

        <button id="start-next-round-btn" class="btn-full">Next Round</button>

    </section>



    <!-- ====================== SCREEN: MATCH COMPLETE ====================== -->
    <section class="screen hide" data-screen="match-win">

        <h1 class="center">MATCH COMPLETE</h1>
        <h2 id="match-winner-banner" class="center"></h2>

        <div class="final-score-box center">
            <p>Final Score (Rounds Won):</p>
            <div id="final-series-score" class="big-score">2 – 1</div>
        </div>

        <button id="new-match-btn" class="btn-full">New Match</button>

    </section>

</div>


<script src="peer-wrapper.js"></script>
<script src="app.js"></script>

</body>
</html>
